# Gitå·¥ä½œæµé…ç½®
# æ”¯æŒå¤šAgentå¹¶è¡Œå¼€å‘å’Œåä½œ

git_workflow:
  # ================================
  # åˆ†æ”¯ç­–ç•¥é…ç½®
  # ================================
  
  branching_strategy:
    # ä¸»åˆ†æ”¯é…ç½®
    main_branches:
      main:
        description: "ç”Ÿäº§å‘å¸ƒåˆ†æ”¯"
        protected: true
        merge_restrictions:
          - "require_pull_request"
          - "require_code_review"
          - "require_status_checks"
        auto_deploy: "production"
        
      develop:
        description: "é›†æˆå¼€å‘åˆ†æ”¯"
        protected: true
        merge_restrictions:
          - "require_pull_request"
          - "require_status_checks"
        auto_deploy: "staging"
    
    # åŠŸèƒ½åˆ†æ”¯å‘½åè§„èŒƒ
    feature_branches:
      naming_pattern: "feature/{agent}/{task-name}"
      base_branch: "develop"
      merge_target: "develop"
      auto_delete_after_merge: true
      
      examples:
        - "feature/frontend/user-login-ui"
        - "feature/backend/payment-api"
        - "feature/devops/ci-pipeline"
        - "feature/qa/e2e-testing"
    
    # çƒ­ä¿®å¤åˆ†æ”¯
    hotfix_branches:
      naming_pattern: "hotfix/{issue-id}-{description}"
      base_branch: "main"
      merge_targets: ["main", "develop"]
      urgent_deployment: true
      
    # å‘å¸ƒåˆ†æ”¯
    release_branches:
      naming_pattern: "release/{version}"
      base_branch: "develop"
      merge_targets: ["main", "develop"]
      version_tagging: true

  # ================================
  # Agentå·¥ä½œç©ºé—´é…ç½®
  # ================================
  
  agent_workspaces:
    workspace_root: "./workspace"
    
    # Agentç‰¹å®šé…ç½®
    agents:
      pm:
        name: "PM Agent"
        workspace_path: "workspace/pm"
        concurrent_tasks: 5
        preferred_files:
          - "docs/*.md"
          - "*.md"
          - "requirements/"
        git_config:
          user.name: "PM Agent"
          user.email: "pm@ai-development.local"
          
      architect:
        name: "Architect Agent"
        workspace_path: "workspace/architect"
        concurrent_tasks: 3
        preferred_files:
          - "docs/architecture/"
          - "*.md"
          - "diagrams/"
          - "specs/"
        git_config:
          user.name: "Architect Agent"
          user.email: "architect@ai-development.local"
          
      frontend:
        name: "Frontend Agent"
        workspace_path: "workspace/frontend"
        concurrent_tasks: 4
        preferred_files:
          - "src/components/"
          - "src/pages/"
          - "src/styles/"
          - "public/"
          - "*.html"
          - "*.css"
          - "*.js"
          - "*.ts"
          - "*.jsx"
          - "*.tsx"
          - "*.vue"
        git_config:
          user.name: "Frontend Agent"
          user.email: "frontend@ai-development.local"
          
      backend:
        name: "Backend Agent"
        workspace_path: "workspace/backend"
        concurrent_tasks: 4
        preferred_files:
          - "src/api/"
          - "src/services/"
          - "src/models/"
          - "src/controllers/"
          - "*.py"
          - "*.js"
          - "*.ts"
          - "*.go"
          - "*.java"
          - "*.sql"
        git_config:
          user.name: "Backend Agent"
          user.email: "backend@ai-development.local"
          
      devops:
        name: "DevOps Agent"
        workspace_path: "workspace/devops"
        concurrent_tasks: 3
        preferred_files:
          - "docker/"
          - "k8s/"
          - "terraform/"
          - "ansible/"
          - ".github/workflows/"
          - "Dockerfile"
          - "docker-compose*.yml"
          - "*.tf"
          - "*.yml"
          - "*.yaml"
        git_config:
          user.name: "DevOps Agent"
          user.email: "devops@ai-development.local"
          
      qa:
        name: "QA Agent"
        workspace_path: "workspace/qa"
        concurrent_tasks: 6
        preferred_files:
          - "tests/"
          - "e2e/"
          - "*.test.js"
          - "*.test.ts"
          - "*.spec.js"
          - "*.spec.ts"
          - "playwright.config.*"
          - "jest.config.*"
        git_config:
          user.name: "QA Agent"
          user.email: "qa@ai-development.local"
          
      security:
        name: "Security Agent"
        workspace_path: "workspace/security"
        concurrent_tasks: 2
        preferred_files:
          - "security/"
          - "*.security"
          - ".github/workflows/*security*"
          - "Dockerfile"
          - "docker-compose*.yml"
        git_config:
          user.name: "Security Agent"
          user.email: "security@ai-development.local"

  # ================================
  # åä½œå·¥ä½œæµ
  # ================================
  
  collaboration_workflows:
    # å¹¶è¡Œå¼€å‘å·¥ä½œæµ
    parallel_development:
      enabled: true
      conflict_resolution: "automatic_merge"
      integration_frequency: "daily"
      
      # é›†æˆç­–ç•¥
      integration_strategy:
        method: "feature_integration"
        schedule: "daily_at_18:00"
        auto_merge_conditions:
          - "all_tests_pass"
          - "no_conflicts"
          - "code_review_approved"
          
    # è·¨Agentåä½œ
    cross_agent_collaboration:
      enabled: true
      
      # åä½œæ¨¡å¼
      collaboration_patterns:
        frontend_backend:
          description: "å‰åç«¯åä½œå¼€å‘"
          agents: ["frontend", "backend"]
          shared_files:
            - "api/schemas/"
            - "types/"
            - "interfaces/"
          coordination_branch: "integration/frontend-backend"
          
        devops_deployment:
          description: "éƒ¨ç½²ç›¸å…³åä½œ"
          agents: ["devops", "backend", "frontend"]
          shared_files:
            - "docker/"
            - "k8s/"
            - "package.json"
            - "requirements.txt"
          coordination_branch: "integration/deployment"
          
        qa_testing:
          description: "æµ‹è¯•åä½œ"
          agents: ["qa", "frontend", "backend"]
          shared_files:
            - "tests/"
            - "e2e/"
            - "fixtures/"
          coordination_branch: "integration/testing"

  # ================================
  # Git Hooksé›†æˆ
  # ================================
  
  git_hooks:
    # æäº¤å‰æ£€æŸ¥
    pre_commit:
      enabled: true
      checks:
        - name: "format_check"
          command: "npm run format:check"
          applicable_files: ["*.js", "*.ts", "*.jsx", "*.tsx"]
          
        - name: "lint_check"
          command: "npm run lint"
          applicable_files: ["*.js", "*.ts", "*.jsx", "*.tsx"]
          
        - name: "type_check"
          command: "npm run type-check"
          applicable_files: ["*.ts", "*.tsx"]
          
        - name: "security_scan"
          command: "npm audit --audit-level moderate"
          applicable_files: ["package.json", "package-lock.json"]
    
    # æ¨é€å‰æ£€æŸ¥
    pre_push:
      enabled: true
      checks:
        - name: "unit_tests"
          command: "npm test"
          timeout: 300
          
        - name: "build_check"
          command: "npm run build"
          timeout: 600
          
        - name: "integration_tests"
          command: "npm run test:integration"
          timeout: 900
          condition: "feature_branch"
    
    # åˆå¹¶åå¤„ç†
    post_merge:
      enabled: true
      actions:
        - name: "install_dependencies"
          command: "npm ci"
          condition: "package_lock_changed"
          
        - name: "database_migration"
          command: "npm run db:migrate"
          condition: "migration_files_changed"
          
        - name: "update_progress"
          command: "./scripts/update-progress.sh"
          
        - name: "notify_team"
          command: "./scripts/notify-merge.sh"

  # ================================
  # åˆå¹¶ç­–ç•¥é…ç½®
  # ================================
  
  merge_strategies:
    # é»˜è®¤åˆå¹¶ç­–ç•¥
    default_strategy: "merge_commit"
    
    # æŒ‰åˆ†æ”¯ç±»å‹é…ç½®ç­–ç•¥
    branch_strategies:
      feature_to_develop:
        strategy: "squash_merge"
        message_format: "{agent}: {task_name}\n\n{commit_list}"
        
      develop_to_main:
        strategy: "merge_commit"
        message_format: "Release: {version}\n\n{feature_list}"
        
      hotfix_to_main:
        strategy: "merge_commit"
        message_format: "Hotfix: {description}\n\nFixes: {issue_list}"
    
    # è‡ªåŠ¨åˆå¹¶æ¡ä»¶
    auto_merge_conditions:
      - "all_status_checks_pass"
      - "no_merge_conflicts"
      - "required_reviews_approved"
      - "up_to_date_with_base"
    
    # å†²çªè§£å†³ç­–ç•¥
    conflict_resolution:
      auto_resolve: true
      resolution_strategies:
        - "prefer_incoming_for_docs"
        - "prefer_current_for_config"
        - "manual_for_code"

  # ================================
  # ä»£ç å®¡æŸ¥é…ç½®
  # ================================
  
  code_review:
    # å®¡æŸ¥è¦æ±‚
    review_requirements:
      minimum_reviewers: 1
      required_reviewer_types:
        - "codeowner"
        - "senior_agent"
      
      # Agentç‰¹å®šå®¡æŸ¥è§„åˆ™
      agent_review_rules:
        frontend:
          required_reviewers: ["architect"]
          auto_assign: ["frontend-lead"]
          
        backend:
          required_reviewers: ["architect", "security"]
          auto_assign: ["backend-lead"]
          
        devops:
          required_reviewers: ["architect"]
          auto_assign: ["devops-lead"]
          
        security:
          required_reviewers: ["security-lead"]
          mandatory: true
    
    # å®¡æŸ¥æ¸…å•
    review_checklist:
      code_quality:
        - "ä»£ç ç¬¦åˆé¡¹ç›®è§„èŒƒ"
        - "æ²¡æœ‰æ˜æ˜¾çš„æ€§èƒ½é—®é¢˜"
        - "é”™è¯¯å¤„ç†å®Œå–„"
        - "ä»£ç æœ‰é€‚å½“çš„æ³¨é‡Š"
        
      testing:
        - "åŒ…å«é€‚å½“çš„æµ‹è¯•ç”¨ä¾‹"
        - "æµ‹è¯•è¦†ç›–ç‡è¾¾æ ‡"
        - "æ‰€æœ‰æµ‹è¯•é€šè¿‡"
        
      security:
        - "æ²¡æœ‰å®‰å…¨æ¼æ´"
        - "æ•æ„Ÿä¿¡æ¯å·²ä¿æŠ¤"
        - "è¾“å…¥éªŒè¯å®Œå–„"
        
      documentation:
        - "APIæ–‡æ¡£å·²æ›´æ–°"
        - "READMEæ–‡æ¡£å·²æ›´æ–°"
        - "å˜æ›´æ—¥å¿—å·²è®°å½•"

  # ================================
  # è‡ªåŠ¨åŒ–å·¥ä½œæµ
  # ================================
  
  automation:
    # è‡ªåŠ¨æ ‡ç­¾
    auto_labeling:
      enabled: true
      rules:
        - pattern: "feature/frontend/*"
          labels: ["frontend", "feature"]
          
        - pattern: "feature/backend/*"
          labels: ["backend", "feature"]
          
        - pattern: "hotfix/*"
          labels: ["hotfix", "urgent"]
          
        - pattern: "security/*"
          labels: ["security", "critical"]
    
    # è‡ªåŠ¨åˆ†é…
    auto_assignment:
      enabled: true
      rules:
        - pattern: "feature/frontend/*"
          assign_to: ["frontend-team"]
          reviewers: ["architect"]
          
        - pattern: "feature/backend/*"
          assign_to: ["backend-team"]
          reviewers: ["architect", "security"]
    
    # çŠ¶æ€æ£€æŸ¥
    status_checks:
      required_checks:
        - "ci/build"
        - "ci/test"
        - "ci/lint"
        - "ci/security-scan"
        
      optional_checks:
        - "ci/performance-test"
        - "ci/e2e-test"

  # ================================
  # é€šçŸ¥é…ç½®
  # ================================
  
  notifications:
    # é€šçŸ¥æ¸ é“
    channels:
      slack:
        enabled: true
        webhook_url: "${SLACK_WEBHOOK_URL}"
        default_channel: "#dev-team"
        
        channel_mapping:
          frontend: "#frontend-team"
          backend: "#backend-team"
          devops: "#devops-team"
          qa: "#qa-team"
          security: "#security-team"
    
    # é€šçŸ¥äº‹ä»¶
    notification_events:
      pull_request_opened:
        enabled: true
        template: "ğŸ”€ æ–°çš„PR: {title} by {agent}"
        
      pull_request_merged:
        enabled: true
        template: "âœ… PRå·²åˆå¹¶: {title} by {agent}"
        
      build_failed:
        enabled: true
        template: "âŒ æ„å»ºå¤±è´¥: {branch} by {agent}"
        urgent: true
        
      security_alert:
        enabled: true
        template: "ğŸš¨ å®‰å…¨å‘Šè­¦: {description}"
        urgent: true
        channel: "#security-alerts"

  # ================================
  # æ€§èƒ½ä¼˜åŒ–é…ç½®
  # ================================
  
  performance:
    # Gité…ç½®ä¼˜åŒ–
    git_config:
      core.preloadindex: true
      core.fscache: true
      gc.auto: 256
      
    # å¤§æ–‡ä»¶å¤„ç†
    large_files:
      lfs_enabled: true
      lfs_patterns:
        - "*.zip"
        - "*.tar.gz"
        - "*.dmg"
        - "*.exe"
        - "*.dll"
        - "*.so"
        - "*.dylib"
        
    # å¿½ç•¥æ–‡ä»¶é…ç½®
    ignore_patterns:
      global:
        - ".DS_Store"
        - "Thumbs.db"
        - "*.log"
        - "node_modules/"
        - ".env"
        - ".env.local"
        
      agent_specific:
        frontend:
          - "dist/"
          - "build/"
          - ".next/"
          - "coverage/"
          
        backend:
          - "__pycache__/"
          - "*.pyc"
          - ".pytest_cache/"
          - "venv/"
          
        devops:
          - "terraform.tfstate"
          - "terraform.tfstate.backup"
          - ".terraform/"